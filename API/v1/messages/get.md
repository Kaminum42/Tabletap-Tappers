# 查询私信

## 说明

查询私信

## 要求

登录认证: 需要

身份 / 权限: 本人发送、接受，或管理员

## 请求方法

`GET`

## 路径

`/api/v1/messages`

## 请求头

参考公共请求头

## 查询参数

- `from_user`
    - 数据类型: `number`
    - 描述: 发送者 ID, 0 则为系统, 若`from_user`, `to_user` 都不指定, 则选取所有与本人有关的, 仅管理员才可选择查看任意用户
    - 约束: 整数, 0 ~ 2^32-1
    - 是否必须: 否
    - 示例: `10000`

- `to_user`
    - 数据类型: `number`
    - 描述: 接收者 ID, 0 则为系统
    - 约束: 整数, 0 ~ 2^32-1
    - 是否必须: 否
    - 示例: `20000`

- `page`
    - 数据类型: `number`
    - 描述: 返回该搜索的第几页, 默认为 `1`
    - 约束: 正整数
    - 是否必须: 否
    - 示例: `1`

- `page_size`
    - 数据类型: `number`
    - 描述: 结果保留最多多少条数据, 默认为 `10`
    - 约束: 正整数, 1 ~ 50
    - 是否必须: 否
    - 示例: `1`

- `sort`
    - 数据类型: `string`
    - 描述: 按照什么字段进行 升/降序 排序, 默认升序, 如有嵌套字段用 `.` 号连接, 多个字段排序用 `,` 隔开
    - 约束: 至少一个字段
    - 是否必须: 否
    - 示例: `send_time|desc`

## 请求体

请求体类型: 无

### 字段说明

无

## 请求示例

```
GET /api/v1/messages HTTP/1.1
...
```

## 响应头

### 响应状态码

- `200`: 查询成功

- `400`: 请求格式不正确

- `401`: 需要进行登录

- `403`: 没有足够的权限

- `429`: 请求过于频繁

- `500`: 服务器内部错误

### 字段说明

无

## 响应体

响应体类型: `application/json`

### 字段说明

- `results`
    - 数据类型: `array`
    - 描述: 查询结果
    - 约束: --
    - 是否必须: 否
    - 示例: --

    - `message_id`
        - 数据类型: `number`
        - 描述: 消息ID
        - 约束: 整数, 0 ~ 2^32-1
        - 是否必须: 是
        - 示例: `1`

    - `from_user`
        - 数据类型: `number`
        - 描述: 发送者ID
        - 约束: 整数, 0 ~ 2^32-1
        - 是否必须: 是
        - 示例: `10000`

    - `to_user`
        - 数据类型: `number`
        - 描述: 接收者ID
        - 约束: 整数, 0 ~ 2^32-1
        - 是否必须: 是
        - 示例: `20000`

    - `content`
        - 数据类型: `string`
        - 描述: 消息内容
        - 约束: 长度 1-2048, Unicode 字符
        - 是否必须: 是
        - 示例: `Hello, world!`

    - `send_time`
        - 数据类型: `number`
        - 描述: 发送时间
        - 约束: 时间戳(ms), 整数, 0 ~ 2^64-1
        - 是否必须: 是(有时序要求)
        - 示例: `1704038400000`

    - `details`
        - 数据类型: `Object`
        - 描述: 其他详细信息
        - 约束: JSON 格式
        - 是否必须: 否
        - 示例: `{"key": "value"}`

## 响应示例

```
HTTP/1.1 200 OK
...

{
    "code": 200,
    "message": "OK",
    "body": [
        {
            "message_id": 1,
            "from_user": 10000,
            "to_user": 20000,
            "content": "Hello, world!",
            "send_time": 1704038400000,
            "details": {
                "key": "value"
            }
        },
        {
            ...
        }
    ]
}
```